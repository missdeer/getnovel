1ã€è¯­æ³•è¯´æ˜

    JSOUPä¹‹Default
        è¯­æ³•å¦‚ä¸‹ï¼š

     @ä¸ºåˆ†éš”ç¬¦,ç”¨æ¥åˆ†éš”è·å–è§„åˆ™
     æ¯æ®µè§„åˆ™å¯åˆ†ä¸º3æ®µ
     ç¬¬ä¸€æ®µæ˜¯ç±»å‹,å¦‚class,id,tag,text,childrenç­‰, childrenè·å–æ‰€æœ‰å­æ ‡ç­¾,ä¸éœ€è¦ç¬¬äºŒæ®µå’Œç¬¬ä¸‰æ®µ,textå¯ä»¥æ ¹æ®æ–‡æœ¬å†…å®¹è·å–
     ç¬¬äºŒæ®µæ˜¯åç§°,text. ç¬¬äºŒæ®µä¸ºæ–‡æœ¬å†…å®¹çš„ä¸€éƒ¨åˆ†
     ç¬¬ä¸‰æ®µæ˜¯ä½ç½®,class,tag,idç­‰ä¼šè·å–åˆ°å¤šä¸ª,æ‰€ä»¥è¦åŠ ä½ç½®
     å¦‚ä¸åŠ ä½ç½®ä¼šè·å–æ‰€æœ‰
     ä½ç½®æ­£ç€æ•°ä»0å¼€å§‹,0æ˜¯ç¬¬ä¸€ä¸ª,å¦‚ä¸ºè´Ÿæ•°åˆ™æ˜¯å–å€’ç€æ•°çš„å€¼,-1ä¸ºå€’æ•°ç¬¬ä¸€ä¸ª,-2ä¸ºå€’æ•°ç¬¬äºŒä¸ª
     !æ˜¯æ’é™¤,æœ‰äº›ä½ç½®ä¸ç¬¦åˆéœ€è¦æ’é™¤ç”¨!,åé¢çš„åºå·ç”¨:éš”å¼€0æ˜¯ç¬¬1ä¸ª,è´Ÿæ•°ä¸ºå€’æ•°åºå·,-1æœ€åä¸€ä¸ª,-2å€’æ•°ç¬¬2ä¸ª,ä¾æ¬¡
     è·å–åˆ—è¡¨çš„æœ€å‰é¢åŠ ä¸Šè´Ÿå·- å¯ä»¥ä½¿åˆ—è¡¨å€’ç½®,æœ‰äº›ç½‘ç«™ç›®å½•åˆ—è¡¨æ˜¯å€’çš„,å‰é¢åŠ ä¸ªè´Ÿå·å¯å˜ä¸ºæ­£çš„
     @çš„æœ€åä¸€æ®µä¸ºè·å–å†…å®¹,å¦‚text,textNodes,ownText,href,src,html,allç­‰
     å¦‚éœ€è¦æ­£åˆ™æ›¿æ¢åœ¨æœ€ååŠ ä¸Š ##æ­£åˆ™è¡¨è¾¾å¼##æ›¿æ¢å†…å®¹ï¼Œæ›¿æ¢å†…å®¹ä¸ºç©ºæ—¶ï¼Œç¬¬äºŒä¸ª##å¯ä»¥çœç•¥
     ä¾‹:class.odd.0@tag.a.0@text||tag.dd.0@tag.h1@text##å…¨æ–‡é˜…è¯»
     ä¾‹:class.odd.0@tag.a.0@text&&tag.dd.0@tag.h1@text##å…¨æ–‡é˜…è¯»

        æ ‡å‡†è§„èŒƒä¸å®ç°åº“ Package org.jsoup.select, CSS-like element selector

    JSOUPä¹‹CSS
        è¯­æ³•è§http://www.open-open.com/jsoup/selector-syntax.htm
        å¿…é¡»ä»¥ @css: å¼€å¤´
        æ ‡å‡†è§„èŒƒä¸å®ç°åº“ Package org.jsoup.select, CSS-like element selector coindataflow.com
        åœ¨çº¿æµ‹è¯• Try jsoup online: Java HTML parser and CSS debugger

    æ³¨æ„ï¼šè·å–å†…å®¹å¯ç”¨text,textNodes,ownText,html,all,href,srcç­‰

    ä¾‹å­è§æœ€åçš„ã€ä¹¦æºä¸€ã€‘çš„æœç´¢é¡µå’Œæ­£æ–‡é¡µè§„åˆ™

    JSONPath
        è¯­æ³•è§ JsonPathæ•™ç¨‹
        æœ€å¥½ä»¥ @json: æˆ– $. å¼€å¤´ï¼Œå…¶ä»–å½¢å¼ä¸å¯é 
        æ ‡å‡†è§„èŒƒ goessner JSONPath - XPath for JSON
        å®ç°åº“ json-path/JsonPath
        åœ¨çº¿æµ‹è¯• Jayway JsonPath Evaluator

    ä¾‹å­è§æœ€åçš„ã€ä¹¦æºä¸‰ã€‘çš„æœç´¢é¡µã€ç›®å½•é¡µå’Œæ­£æ–‡é¡µè§„åˆ™

    XPath
        è¯­æ³•è§ XPathæ•™ç¨‹ã€XPathåº“çš„è¯´æ˜
        å¿…é¡»ä»¥ @XPath: æˆ– // å¼€å¤´
        æ ‡å‡†è§„èŒƒ W3C XPATH 1.0
        å®ç°åº“ hegexiaohuozi/JsoupXpath

    ä¾‹å­è§æœ€åçš„ã€ä¹¦æºäºŒã€‘çš„æœç´¢é¡µã€è¯¦æƒ…é¡µå’Œæ­£æ–‡é¡µè§„åˆ™ï¼Œä»¥åŠç›®å½•é¡µçš„ä¸‹ä¸€é¡µè§„åˆ™

    JavaScript
        å¯ä»¥åœ¨ ã€@js:ä¸­ä½¿ç”¨ï¼Œç»“æœå­˜åœ¨resultä¸­
        @js:åªèƒ½æ”¾åœ¨å…¶ä»–è§„åˆ™çš„æœ€åä½¿ç”¨
        å¯ä»¥åœ¨ä»»æ„ä½ç½®ä½¿ç”¨ï¼Œè¿˜èƒ½ä½œä¸ºå…¶ä»–è§„åˆ™çš„åˆ†éš”ç¬¦ï¼Œä¾‹ï¼štag.li//a
        åœ¨æœç´¢åˆ—è¡¨ã€å‘ç°åˆ—è¡¨å’Œç›®å½•ä¸­ä½¿ç”¨å¯ä»¥ç”¨+å¼€å¤´ï¼Œä½¿ç”¨AllInOneè§„åˆ™

    æ­£åˆ™ä¹‹AllInOne

        åªèƒ½åœ¨æœç´¢åˆ—è¡¨ã€å‘ç°åˆ—è¡¨ã€è¯¦æƒ…é¡µé¢„åŠ è½½å’Œç›®å½•åˆ—è¡¨ä¸­ä½¿ç”¨

        å¿…é¡»ä»¥ : å¼€å¤´

        æ•™ç¨‹ veedrin/horseshoe 2018-10 | Regexä¸“é¢˜

        è¯­æ³• æ–¹æ³• å¼•æ“

        ä¾‹å­è§æœ€åçš„ã€ä¹¦æºä¸€ã€‘çš„ç›®å½•é¡µè§„åˆ™ï¼Œæœ€å‰é¢çš„-è¡¨ç¤ºç›®å½•å€’åºï¼Œä»¥åŠã€ä¹¦æºäºŒã€‘çš„ç›®å½•é¡µè§„åˆ™

    æ­£åˆ™ä¹‹OnlyOne
        å½¢å¼ ##æ­£åˆ™è¡¨è¾¾å¼##æ›¿æ¢å†…å®¹###
        åªèƒ½åœ¨æœç´¢åˆ—è¡¨ã€å‘ç°åˆ—è¡¨ã€è¯¦æƒ…é¡µé¢„åŠ è½½ã€ç›®å½•åˆ—è¡¨ä¹‹å¤–ä½¿ç”¨
        ä¾‹å­è§æœ€åçš„ã€ä¹¦æºä¸€ã€‘çš„è¯¦æƒ…é¡µè§„åˆ™

    æ³¨æ„ç‚¹ï¼šè¯¥è§„åˆ™åªèƒ½è·å–ç¬¬ä¸€ä¸ªåŒ¹é…åˆ°çš„ç»“æœå¹¶è¿›è¡Œæ›¿æ¢

    æ­£åˆ™ä¹‹å‡€åŒ–
        å½¢å¼ ##æ­£åˆ™è¡¨è¾¾å¼##æ›¿æ¢å†…å®¹
        åªèƒ½è·Ÿåœ¨å…¶ä»–è§„åˆ™åé¢ï¼Œç‹¬ç«‹ä½¿ç”¨ç›¸å½“äºall##æ­£åˆ™è¡¨è¾¾å¼##æ›¿æ¢å†…å®¹
        ä¾‹å­è§æœ€åçš„ã€ä¹¦æºä¸€ã€‘çš„æ­£æ–‡é¡µè§„åˆ™

    æ³¨æ„ç‚¹ï¼šè¯¥è§„åˆ™ä¸ºå¾ªç¯åŒ¹é…æ›¿æ¢

    è‡ªå®šä¹‰ä¸‰ç§è¿æ¥ç¬¦å·

        ç¬¦å·ï¼š&&ã€||ã€%%

        åªèƒ½åœ¨åŒç§è§„åˆ™é—´ä½¿ç”¨ï¼Œä¸åŒ…æ‹¬jså’Œæ­£åˆ™

        &&ä¼šåˆå¹¶æ‰€æœ‰å–åˆ°çš„å€¼,

        ||ä¼šä»¥ç¬¬ä¸€ä¸ªå–åˆ°å€¼çš„ä¸ºå‡†

        %%ä¼šä¾æ¬¡å–æ•°ï¼Œå¦‚ä¸‰ä¸ªåˆ—è¡¨ï¼Œ

        å…ˆå–åˆ—è¡¨1çš„ç¬¬ä¸€ä¸ªï¼Œå†å–åˆ—è¡¨2çš„ç¬¬ä¸€ä¸ªï¼Œå†å–åˆ—è¡¨3çš„ç¬¬ä¸€ä¸ªï¼Œ

        å†å–åˆ—è¡¨1çš„ç¬¬äºŒä¸ªï¼Œå†å–åˆ—è¡¨2çš„ç¬¬äºŒä¸ªâ€¦

2ã€Legadoçš„ç‰¹æ®Šè§„åˆ™

    URLå¿…çŸ¥å¿…ä¼š
        è¯·æ±‚å¤´

        ä¸€èˆ¬å½¢å¼ï¼Œå¦‚ä¸‹æ‰€ç¤º

         {
             "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/77.0.3865.120 Safari/537.36",
             "Accept-Language":"zh-CN,zh;q=0.9"
         }

        å¤æ‚æƒ…å†µå¯ä½¿ç”¨js

         
         (()=>{
             var ua = "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/77.0.3865.120 Safari/537.36";
             var headers = {"User-Agent": ua};
             return JSON.stringify(headers);
         })()
         

        â€»å…¶ä¸­ï¼Œuaå¿…é¡»ä¿è¯æ˜¯JavaScriptçš„Stringç±»å‹ï¼ŒJSON.stringify()æ‰èƒ½å°†headerè½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚
        GETè¯·æ±‚

        ä¸€èˆ¬å½¢å¼å¦‚ä¸‹ï¼Œcharsetä¸ºutf-8æ—¶å¯çœç•¥ï¼Œæ— ç‰¹æ®Šæƒ…å†µä¸éœ€è¦è¯·æ±‚å¤´å’ŒwebViewï¼Œå‚æ•°webViewéç©ºæ—¶é‡‡ç”¨webViewåŠ è½½

         https://www.baidu.com,{
             "charset": "gbk",
             "headers": "{\"User-Agent\":\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/77.0.3865.120 Safari/537.36\"}",
             "webView": true
         }

        å¤æ‚æƒ…å†µå¯ä½¿ç”¨js

         
             var ua = "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/77.0.3865.120 Safari/537.36";
             var headers = {"User-Agent": ua};
             var option = {
                 "charset": "gbk",
                 "headers": JSON.stringify(headers),
                 "webView": true
             };
             "https://www.baidu.com," + JSON.stringify(option)
         

        â€»å…¶ä¸­ï¼Œuaå¿…é¡»ä¿è¯æ˜¯JavaScriptçš„Stringç±»å‹ï¼ŒJSON.stringify()æ‰èƒ½å°†headerè½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚
        POSTè¯·æ±‚

        ä¸€èˆ¬å½¢å¼å¦‚ä¸‹ï¼Œbodyæ˜¯è¯·æ±‚ä½“ï¼Œcharsetä¸ºutf-8æ—¶å¯çœç•¥ï¼Œæ— ç‰¹æ®Šæƒ…å†µä¸éœ€è¦è¯·æ±‚å¤´å’ŒwebViewï¼Œå‚æ•°webViewéç©ºæ—¶é‡‡ç”¨webViewåŠ è½½

         https://www.baidu.com,{
             "charset": "gbk",
             "method": "POST",
             "body": "bid=10086",
             "headers": "{\"User-Agent\":\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/77.0.3865.120 Safari/537.36\"}",
             "webView": true
         }

        å¤æ‚æƒ…å†µå¯ä½¿ç”¨js

         
             var ua = "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/77.0.3865.120 Safari/537.36";
             var headers = {"User-Agent": ua};
             var body = "bid="+"10086";
             var option = {
                 "charset": "gbk",
                 "method": "POST",
                 "body": String(body),
                 "headers": JSON.stringify(headers),
                 "webView": true
             };
             "https://www.baidu.com," + JSON.stringify(option)
            

        â€»å…¶ä¸­ï¼Œuaå’Œbodyå¿…é¡»ä¿è¯æ˜¯JavaScriptçš„Stringç±»å‹ï¼ŒJSON.stringify()æ‰èƒ½è½¬æ¢å­—ç¬¦ä¸²æˆåŠŸã€‚å˜é‡æ˜¯è®¡ç®—å¾—åˆ°çš„å°½é‡éƒ½ç”¨String()å¼ºè½¬ä¸€ä¸‹ç±»å‹ã€‚

    å˜é‡çš„putä¸get

        @putä¸@get

        åªèƒ½ç”¨äºjsä»¥å¤–çš„è§„åˆ™ä¸­ï¼Œ@puté‡Œä½¿ç”¨JSONPathä¸éœ€è¦åŠ å¼•å·ï¼Œå…¶ä»–è§„åˆ™éœ€è¦åŠ å¼•å·ï¼Œ

        ä¾‹ï¼š@put:{bid:"//*[@bid-data]/@bid-data"}

        java.putä¸java.get

        åªèƒ½ç”¨äºjsä¸­ï¼Œåœ¨jsä¸­æ— æ³•ä½¿ç”¨@get

    {{}}ä¸{}è§„åˆ™

        åœ¨æœç´¢URLä¸å‘ç°URLä¸­çš„{{}}

        åœ¨{{}}é‡Œåªèƒ½ä½¿ç”¨js

        åœ¨æœç´¢URLä¸å‘ç°URLä»¥å¤–çš„{{}}

        å¯åœ¨{{}}ä¸­ä½¿ç”¨ä»»æ„è§„åˆ™ï¼ˆæ­£åˆ™é™¤å¤–ï¼Ÿï¼‰ï¼Œé»˜è®¤ä¸ºjsï¼Œä½¿ç”¨å…¶ä»–è§„åˆ™éœ€è¦æœ‰æ˜æ˜¾çš„æ ‡å¿—å¤´ï¼Œ

        å¦‚ï¼šDefaultè§„åˆ™éœ€è¦ä»¥@@å¼€å¤´ï¼ŒXPathéœ€è¦ä»¥@xpath:æˆ–//å¼€å¤´ï¼ŒJSONPathéœ€è¦ä»¥@json:æˆ–$.å¼€å¤´ï¼ŒCSSéœ€è¦ä»¥@css:å¼€å¤´

        {}è§„åˆ™

        ç•™ç”¨äº†é˜…è¯»2.0çš„è§„åˆ™ï¼Œåªèƒ½ä½¿ç”¨JSONPathï¼Œå°½é‡é¿å…ä½¿ç”¨

    è‡ªå®šä¹‰jsæ–¹æ³•

    //å½“å‰é¡µçš„responseBody
    result

    //å½“å‰é¡µçš„URL
    baseUrl

    //è¾“å…¥urlStrè·å–ç½‘é¡µå†…å®¹ï¼Œè¿”å›ç±»å‹String?
    java.ajax(urlStr: String)

    //æ ¼å¼åŒ–æ—¶é—´æˆ³ï¼Œè¿”å›ç±»å‹String
    java.timeFormat(timestamp: Long)

    //base64è§£ç ï¼Œè¿”å›ç±»å‹String
    java.base64Decode(str: String)
    //java.base64Decode(str: String, flags: Int)    //æœªå¯ç”¨

    //base64ç¼–ç ï¼Œè¿”å›ç±»å‹String?
    java.base64Encode(str: String)
    java.base64Encode(str: String, flags: Int)

    //md5ç¼–ç ï¼Œè¿”å›ç±»å‹String?
    java.md5Encode(str: String)
    java.md5Encode16(str: String)

    /**************ä»¥ä¸‹éƒ¨åˆ†æ–¹æ³•ç”±äºJAVAä¸æ”¯æŒå‚æ•°é»˜è®¤å€¼ï¼Œè°ƒç”¨æ—¶ä¸èƒ½çœç•¥***************/
    //è®¾ç½®éœ€è§£æçš„å†…å®¹contentå’ŒbaseUrlï¼Œè¿”å›ç±»å‹AnalyzeRule
    java.setContent(content: Any?, baseUrl: String? = this.baseUrl)

    //è¾“å…¥è§„åˆ™ruleå’ŒURLæ ‡å¿—isUrlè·å–æ–‡æœ¬åˆ—è¡¨ï¼Œè¿”å›ç±»å‹List?
    java.getStringList(rule: String, isUrl: Boolean = false)

    //è¾“å…¥è§„åˆ™ruleå’ŒURLæ ‡å¿—isUrlè·å–æ–‡æœ¬ï¼Œè¿”å›ç±»å‹String
    java.getString(ruleStr: String?, isUrl: Boolean = false)

    //è¾“å…¥è§„åˆ™ruleStrè·å–èŠ‚ç‚¹åˆ—è¡¨ï¼Œè¿”å›ç±»å‹List
    java.getElements(ruleStr: String)

3ã€ä¹¦æºä¹‹ã€ŒåŸºæœ¬ã€

    ä¹¦æºURL(bookSourceUrl)
        å¿…å¡«
        å”¯ä¸€æ ‡è¯†ï¼Œä¸å¯é‡å¤
        ä¸å…¶ä»–æºç›¸åŒä¼šè¦†ç›–

    ä¹¦æºåç§°(bookSourceName)
        å¿…å¡«
        åå­—å¯é‡å¤

    ä¹¦æºåˆ†ç»„(bookSourceGroup)

    å¯ä¸å¡«

    ç”¨äºæ•´ç†æº

    ç™»å½•URL(loginUrl)

        å¯ä¸å¡«

        ç”¨äºç™»å½•ä¸ªäººè´¦æˆ·

    ä¹¦ç±URLæ­£åˆ™(bookUrlPattern)

        å¯ä¸å¡«

        æ·»åŠ ç½‘å€æ—¶ï¼Œç”¨äºè¯†åˆ«ä¹¦æº

        ä¾‹:https?://www.piaotian.com/bookinfo/.*

    è¯·æ±‚å¤´(header)
        å¯ä¸å¡«
        è®¿é—®ç½‘å€æ—¶ä½¿ç”¨

4ã€ä¹¦æºä¹‹ã€Œæœç´¢ã€

    æœç´¢åœ°å€(url)

        keyä¸ºå…³é”®å­—æ ‡è¯†ï¼Œé€šå¸¸å½¢æ€ä¸º{{key}}ï¼Œè¿è¡Œæ—¶ä¼šæ›¿æ¢ä¸ºæœç´¢å…³é”®å­—

        ä¹Ÿå¯ä»¥å¯¹keyè¿›è¡ŒåŠ å¯†ç­‰æ“ä½œï¼Œå¦‚ï¼š{{java.base64Encode(key)}}

        pageä¸ºå…³é”®å­—æ ‡è¯†ï¼Œé€šå¸¸å½¢æ€ä¸º{{page}}ï¼Œpageçš„åˆå€¼ä¸º1ä¹Ÿå¯ä»¥å¯¹pageè¿›è¡Œè®¡ç®—ï¼Œ

        å¦‚ï¼š{{(page-1)*20}}ï¼Œæœ‰æ—¶ä¼šé‡åˆ°ç¬¬ä¸€é¡µæ²¡æœ‰é¡µæ•°çš„æƒ…å†µï¼Œæœ‰ä¸¤ç§æ–¹æ³•ï¼š

        â‘  {{page - 1 == 0 ? "": page}}

        â‘¡ <,{{page}}>

        æ”¯æŒç›¸å¯¹URL

    ä¹¦ç±åˆ—è¡¨è§„åˆ™(bookList)

    ä¹¦åè§„åˆ™(name)

    ä½œè€…è§„åˆ™(author)

    åˆ†ç±»è§„åˆ™(kind)

    å­—æ•°è§„åˆ™(wordCount)

    æœ€æ–°ç« èŠ‚è§„åˆ™(lastChapter)

    ç®€ä»‹è§„åˆ™(intro)

    å°é¢è§„åˆ™(coverUrl)

    è¯¦æƒ…é¡µurlè§„åˆ™(bookUrl)

5ã€ä¹¦æºä¹‹ã€Œå‘ç°ã€

    å‘ç°åœ°å€è§„åˆ™(url)

        pageä¸ºå…³é”®å­—æ ‡è¯†ï¼Œé€šå¸¸å½¢æ€ä¸º{{page}}ï¼Œpageçš„åˆå€¼ä¸º1ï¼Œä¹Ÿå¯ä»¥å¯¹pageè¿›è¡Œè®¡ç®—ï¼Œ

        å¦‚ï¼š{{(page-1)*20}}ï¼Œæœ‰æ—¶ä¼šé‡åˆ°ç¬¬ä¸€é¡µæ²¡æœ‰é¡µæ•°çš„æƒ…å†µï¼Œæœ‰ä¸¤ç§æ–¹æ³•ï¼š

        â‘  {{page - 1 == 0 ? "": page}}

        â‘¡ <,{{page}}>

        å‘ç°URLå¯ä½¿ç”¨&&æˆ–æ¢è¡Œç¬¦éš”å¼€

        æ”¯æŒç›¸å¯¹URL

    ä¹¦ç±åˆ—è¡¨è§„åˆ™(bookList)

    ä¹¦åè§„åˆ™(name)

    ä½œè€…è§„åˆ™(author)

    åˆ†ç±»è§„åˆ™(kind)

    å­—æ•°è§„åˆ™(wordCount)

    æœ€æ–°ç« èŠ‚è§„åˆ™(lastChapter)

    ç®€ä»‹è§„åˆ™(intro)

    å°é¢è§„åˆ™(coverUrl)

    è¯¦æƒ…é¡µurlè§„åˆ™(bookUrl)

6ã€ä¹¦æºä¹‹ã€Œè¯¦æƒ…ã€

    é¢„å¤„ç†è§„åˆ™(bookInfoInit)

        åªèƒ½ä½¿ç”¨æ­£åˆ™ä¹‹AllInOneæˆ–è€…js

        æ­£åˆ™ä¹‹AllInOneå¿…é¡»ä»¥:å¼€å¤´

        jsçš„è¿”å›å€¼éœ€è¦æ˜¯jsonå¯¹è±¡ï¼Œä¾‹ï¼š

      
      (function(){
          return {
              a:"åœ£å¢Ÿ",
              b:"è¾°ä¸œ",
              c:"ç„å¹»",
              d:"200ä¸‡å­—",
              e:"ç¬¬ä¸¤åƒç«  è¾°ä¸œè‚¾è™š",
              f:"åœ¨ç ´è´¥ä¸­å´›èµ·ï¼Œåœ¨å¯‚ç­ä¸­å¤è‹ã€‚æ²§æµ·æˆå°˜ï¼Œé›·ç”µæ¯ç«­...",
              g:"https://bookcover.yuewen.com/qdbimg/349573/1004608738/300
      ",
              h:"https://m.qidian.com/book/1004608738"
          };
      })()
      

    æ­¤æ—¶ï¼Œä¹¦åè§„åˆ™å¡«aï¼Œä½œè€…è§„åˆ™å¡«bï¼Œåˆ†ç±»è§„åˆ™å¡«cï¼Œå­—æ•°è§„åˆ™å¡«dï¼Œæœ€æ–°ç« èŠ‚è§„åˆ™å¡«eï¼Œç®€ä»‹è§„åˆ™fï¼Œå°é¢è§„åˆ™å¡«gï¼Œç›®å½•URLè§„åˆ™å¡«h

    ä¹¦åè§„åˆ™(name)

    ä½œè€…è§„åˆ™(author)

    åˆ†ç±»è§„åˆ™(kind)

    å­—æ•°è§„åˆ™(wordCount)

    æœ€æ–°ç« èŠ‚è§„åˆ™(lastChapter)

    ç®€ä»‹è§„åˆ™(intro)

    å°é¢è§„åˆ™(coverUrl)

    ç›®å½•URLè§„åˆ™(tocUrl)

7ã€ä¹¦æºä¹‹ã€Œç›®å½•ã€

    ç›®å½•åˆ—è¡¨è§„åˆ™(chapterList)
        é¦–å­—ç¬¦ä½¿ç”¨è´Ÿå·(-)å¯ä½¿åˆ—è¡¨ååº

    ç« èŠ‚åç§°è§„åˆ™(ruleChapterName)

    ç« èŠ‚URLè§„åˆ™(chapterUrl)

    VIPæ ‡è¯†(isVip)
        å½“ç»“æœä¸ºnull false 0 ""æ—¶ä¸ºéVIP

    ç« èŠ‚ä¿¡æ¯(ChapterInfo)
        å¯è°ƒç”¨java.timeFormat(timestamp: Long)å°†æ—¶é—´æˆ³è½¬ä¸ºyyyy/MM/dd HH:mmæ ¼å¼çš„æ—¶é—´

    ç›®å½•ä¸‹ä¸€é¡µè§„åˆ™(nextTocUrl)
        å¯è¿”å›listæˆ–è€…string
        jsä¸­è¿”å› []æˆ– nullæˆ– ""æ—¶åœæ­¢åŠ è½½ä¸‹ä¸€é¡µ

8ã€ä¹¦æºä¹‹ã€Œæ­£æ–‡ã€

    æ­£æ–‡è§„åˆ™(content)
        å¦‚ä¸‹ç¤ºä¾‹ï¼Œåœ¨è¯¦æƒ…é¡µ(ç›®å½•é¡µ)å’Œæ­£æ–‡ä½¿ç”¨webViewåŠ è½½ï¼Œä¾‹ï¼š

      {
        "bookSourceName": "çŒ«è€³FM",
        "bookSourceType": 1,
        "bookSourceUrl": "https://www.missevan.com",
        "customOrder": 0,
        "enabled": false,
        "enabledExplore": false,
        "lastUpdateTime": 0,
        "ruleBookInfo": "{}",
        "ruleContent": "{\n  \"content\": \"https://static.missevan.com/{{//*[contains(@class,\\\"pld-sound-active\\\")]/@data-soundurl64}}\",\n  \"sourceRegex\": \"\",\n  \"webJs\": \"\"\n}",
        "ruleExplore": "{}",
        "ruleSearch": "{\n  \"author\": \"author\",\n  \"bookList\": \"$.info.Datas\",\n  \"bookUrl\": \"https://www.missevan.com/mdrama/drama/{{$.id}},{\\\"webView\\\":true}\",\n  \"coverUrl\": \"cover \",\n  \"intro\": \"abstract\",\n  \"kind\": \"{{$.type_name}},{{$.catalog_name}}\",\n  \"lastChapter\": \"newest \",\n  \"name\": \"name\",\n  \"wordCount\": \"catalog_name \"\n}",
        "ruleToc": "{\n  \"chapterList\": \"@css:.scroll-list.btn-groups>a\",\n  \"chapterName\": \"text\",\n  \"chapterUrl\": \"href##$##,{\\\"webView\\\":true}\"\n}",
        "searchUrl": "https://www.missevan.com/dramaapi/search?s={{key}}&page=1",
        "weight": 0
      }

    æ­£æ–‡ä¸‹ä¸€é¡µURLè§„åˆ™(nextContentUrl)

    webJs
        ç”¨äºæ¨¡æ‹Ÿé¼ æ ‡ç‚¹å‡»

    èµ„æºæ­£åˆ™(sourceRegex)

        ç”¨äºå—…æ¢

        ä¸€èˆ¬æƒ…å†µä¸‹çš„æ— è„‘æ•™ç¨‹å¦‚ä¸‹ï¼¿Ï†( Â°-Â°)/

        ç« èŠ‚é“¾æ¥åé¢åŠ  ,{"webView":true}Ù©(à¹‘â›á´—â›à¹‘)Û¶ï¼Œä¸è¦æ´’æ•·æ•·çš„å†™æˆ tag.a@href,{"webView":true}æˆ–$.link,{"webView":true}

        åœ¨æœ‰å—…æ¢åŠŸèƒ½çš„æµè§ˆå™¨ï¼ˆå¦‚ï¼šviaã€xæµè§ˆå™¨ç­‰ï¼‰ä¸­ï¼Œè¾“å…¥ç« èŠ‚é“¾æ¥ã€‚æ³¨æ„(ï½¡â€¢Ìï¸¿â€¢Ì€ï½¡) åƒä¸‡åˆ«å¸¦,{"webView":true} (â•¯ï¹â•°)b

        åª’ä½“å¼€å§‹æ’­æ”¾åä½¿ç”¨æµè§ˆå™¨çš„å—…æ¢åŠŸèƒ½ï¼ŒæŸ¥çœ‹èµ„æºçš„é“¾æ¥

        åœ¨èµ„æºæ­£åˆ™é‡Œå¡«å†™èµ„æºé“¾æ¥çš„æ­£åˆ™ï¼Œä¸€èˆ¬å†™.*\.(mp3|mp4).*è¿™ä¸ªå°±å¯ä»¥äº†

        æœ€ååœ¨æ­£æ–‡å¡«å†™ resultãƒ¾(@^â–½^@)ãƒ

        å¦‚ä¸‹ç¤ºä¾‹ï¼Œåœ¨æ­£æ–‡å—…æ¢mp3å’Œmp4çš„èµ„æºï¼š

      {
        "bookSourceName": "çŒ«è€³FM",
        "bookSourceType": 1,
        "bookSourceUrl": "https://www.missevan.com",
        "customOrder": 0,
        "enabled": false,
        "enabledExplore": false,
        "lastUpdateTime": 0,
        "ruleBookInfo": "{}",
        "ruleContent": "{\n  \"content\": \"result\",\n  \"sourceRegex\": \".*\\\\.(mp3|mp4)\",\n  \"webJs\": \"\"\n}",
        "ruleExplore": "{}",
        "ruleSearch": "{\n  \"author\": \"author\",\n  \"bookList\": \"$.info.Datas\",\n  \"bookUrl\": \"https://www.missevan.com/mdrama/drama/{{$.id}},{\\\"webView\\\":true}\",\n  \"coverUrl\": \"cover \",\n  \"intro\": \"abstract\",\n  \"kind\": \"{{$.type_name}},{{$.catalog_name}}\",\n  \"lastChapter\": \"newest \",\n  \"name\": \"name\",\n  \"wordCount\": \"catalog_name \"\n}",
        "ruleToc": "{\n  \"chapterList\": \"@css:.scroll-list.btn-groups>a\",\n  \"chapterName\": \"text\",\n  \"chapterUrl\": \"href##$##,{\\\"webView\\\":true}\"\n}",
        "searchUrl": "https://www.missevan.com/dramaapi/search?s={{key}}&page=1",
        "weight": 0
      }

9ã€è¡¥å……è¯´æ˜

    æ˜¾ç¤ºjsçš„æŠ¥é”™ä¿¡æ¯

  (function(result){
      try{
            // å¤„ç†result
            // ...
            // å½“è¿”å›ç»“æœä¸ºå­—ç¬¦ä¸²æ—¶
            return result;
            // å½“è¿”å›ç»“æœä¸ºåˆ—è¡¨æ—¶
            return list;
      }
      catch(e){
            // å½“è¿”å›ç»“æœä¸ºå­—ç¬¦ä¸²æ—¶
            return ""+e;
            // å½“è¿”å›ç»“æœä¸ºåˆ—è¡¨æ—¶
            return [""+e];  //åˆ—è¡¨å¯¹åº”åç§°å¤„å¡«""+resultæŸ¥çœ‹
      }
  })(result);

    è¯·å–„ç”¨è°ƒè¯•åŠŸèƒ½

    è°ƒè¯•æœç´¢

    è¾“å…¥å…³é”®å­—ï¼Œå¦‚ï¼šç³»ç»Ÿ

    è°ƒè¯•å‘ç°

    è¾“å…¥å‘ç°URLï¼Œå¦‚ï¼šæœˆç¥¨æ¦œ::https://www.qidian.com/rank/yuepiao?page={{page}}

    è°ƒè¯•è¯¦æƒ…é¡µ

    è¾“å…¥è¯¦æƒ…é¡µURLï¼Œå¦‚ï¼šhttps://m.qidian.com/book/1015609210

    è°ƒè¯•ç›®å½•é¡µ

    è¾“å…¥ç›®å½•é¡µURLï¼Œå¦‚ï¼š++https://www.zhaishuyuan.com/read/30394

    è°ƒè¯•æ­£æ–‡é¡µ

    è¾“å…¥æ­£æ–‡é¡µURLï¼Œå¦‚ï¼š--https://www.zhaishuyuan.com/chapter/30394/20940996

    æ— è„‘{"webView":true}å¾ˆæ–¹ä¾¿

    ç‰¹åˆ«æ³¨æ„ç”¨JSON.stringify()æ–¹æ³•æ—¶ï¼Œéœ€è¦ä¿è¯JSONå¯¹è±¡çš„valueéƒ½æ˜¯JavaScriptçš„Stringç±»å‹(åœ¨é˜…è¯»3.0ä¸­)

    é™„ï¼š

    ä¹¦æºä¸€

    {
      "bookSourceGroup": "CSS; æ­£åˆ™",
      "bookSourceName": "ğŸ”¥å°è¯´2016",
      "bookSourceType": 0,
      "bookSourceUrl": "https://www.xiaoshuo2016.com",
      "bookUrlPattern": "",
      "customOrder": 0,
      "enabled": true,
      "enabledExplore": false,
      "exploreUrl": "",
      "lastUpdateTime": 0,
      "loginUrl": "",
      "ruleBookInfo": "{\n  \"author\": \"##:author\\\"[^\\\"]+\\\"([^\\\"]*)##$1###\",\n  \"coverUrl\": \"##og:image\\\"[^\\\"]+\\\"([^\\\"]*)##$1###\",\n  \"intro\": \"##:description\\\"[^\\\"]+\\\"([\\\\w\\\\W]*?)\\\"/##$1###\",\n  \"kind\": \"##:category\\\"[^\\\"]+\\\"([^\\\"]*)##$1###\",\n  \"lastChapter\": \"##_chapter_name\\\"[^\\\"]+\\\"([^\\\"]*)##$1###\",\n  \"name\": \"##:book_name\\\"[^\\\"]+\\\"([^\\\"]*)##$1###\",\n  \"tocUrl\": \"\"\n}",
      "ruleContent": "{\n  \"content\": \"@css:.articleDiv p@textNodes##æœç´¢.*æ‰‹æœºè®¿é—®|ä¸€ç§’è®°ä½.*|.*é˜…è¯»ä¸‹è½½|\",\n  \"nextContentUrl\": \"\"\n}",
      "ruleExplore": "{}",
      "ruleSearch": "{\n  \"author\": \"@css:p:eq(2)>a@text\",\n  \"bookList\": \"@css:li.clearfix\",\n  \"bookUrl\": \"@css:.name>a@href\",\n  \"coverUrl\": \"@css:img@src\",\n  \"intro\": \"@css:.note.clearfix p@text\",\n  \"kind\": \"@css:.note_text,p:eq(4)@text\",\n  \"lastChapter\": \"@css:p:eq(3)@text\",\n  \"name\": \"@css:.name@text\"\n}",
      "ruleToc": "{\n  \"chapterList\": \"-:
    ([^<]*)\",\n  \"chapterName\": \"$2\",\n  \"chapterUrl\": \"$1\",\n  \"nextTocUrl\": \"\"\n}",
      "searchUrl": "/modules/article/search.php?searchkey={{key}}&submit=&page={{page}},{\n  \"charset\": \"gbk\"\n}",
      "weight": 0
    }

    ä¹¦æºäºŒ

    {
      "bookSourceGroup": "XPath; æ­£åˆ™",
      "bookSourceName": "ğŸ”¥é‡‡å¢¨é˜æ‰‹æœºç‰ˆ",
      "bookSourceType": 0,
      "bookSourceUrl": "https://m.caimoge.com",
      "bookUrlPattern": "",
      "customOrder": 0,
      "enabled": true,
      "enabledExplore": false,
      "exploreUrl": "",
      "lastUpdateTime": 0,
      "loginUrl": "",
      "ruleBookInfo": "{\n  \"author\": \"//*[@property=\\\"og:novel:author\\\"]/@content\",\n  \"coverUrl\": \"//*[@property=\\\"og:image\\\"]/@content\",\n  \"intro\": \"//*[@property=\\\"og:description\\\"]/@content\",\n  \"kind\": \"//*[@property=\\\"og:novel:category\\\"]/@content\",\n  \"lastChapter\": \"//*[@id=\\\"newlist\\\"]//li[1]/a/text()\",\n  \"name\": \"//*[@property=\\\"og:novel:book_name\\\"]/@content\",\n  \"tocUrl\": \"//a[text()=\\\"é˜…è¯»\\\"]/@href\"\n}",
      "ruleContent": "{\n  \"content\": \"//*[@id=\\\"content\\\"]\",\n  \"nextContentUrl\": \"\"\n}",
      "ruleExplore": "{}",
      "ruleSearch": "{\n  \"author\": \"//dd[2]/text()\",\n  \"bookList\": \"//*[@id=\\\"sitebox\\\"]/dl\",\n  \"bookUrl\": \"//dt/a/@href\",\n  \"coverUrl\": \"//img/@src\",\n  \"kind\": \"//dd[2]/span/text()\",\n  \"lastChapter\": \"\",\n  \"name\": \"//h3/a/text()\"\n}",
      "ruleToc": "{\n  \"chapterList\": \":href=\\\"(/read[^\\\"]*html)\\\">([^<]*)\",\n  \"chapterName\": \"$2\",\n  \"chapterUrl\": \"$1\",\n  \"nextTocUrl\": \"//*[@id=\\\"pagelist\\\"]/*[position()>1]/@value\"\n}",
      "searchUrl": "/search.html,{\n  \"method\": \"POST\",\n  \"body\": \"searchkey={{key}}\"\n}",
      "weight": 0
    }

    ä¹¦æºä¸‰

    {
      "bookSourceGroup": "JSon",
      "bookSourceName": "çŒé¹°å°è¯´ç½‘",
      "bookSourceType": 0,
      "bookSourceUrl": "http://api.book.lieying.cn",
      "customOrder": 0,
      "enabled": true,
      "enabledExplore": false,
      "header": "{\n  \"User-Agent\": \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36\"\n}",
      "lastUpdateTime": 0,
      "ruleBookInfo": "{}",
      "ruleContent": "{\n  \"content\": \"$.chapter.body\"\n}",
      "ruleExplore": "{}",
      "ruleSearch": "{\n  \"author\": \"$.author\",\n  \"bookList\": \"$..books[*]\",\n  \"bookUrl\": \"/Book/getChapterListByBookId?bookId={$._id}\",\n  \"coverUrl\": \"$.cover\",\n  \"intro\": \"$.shortIntro\",\n  \"kind\": \"$.minorCate\",\n  \"lastChapter\": \"$.lastChapter\",\n  \"name\": \"$.title\"\n}",
      "ruleToc": "{\n  \"chapterList\": \"$.chapterInfo.chapters.[*]\",\n  \"chapterName\": \"$.title\",\n  \"chapterUrl\": \"$.link\"\n}",
      "searchUrl": "/Book/search?query={{key}}&start={{(page-1)*20}}&limit=40&device_type=android&app_version=165",
      "weight": 0
    }

